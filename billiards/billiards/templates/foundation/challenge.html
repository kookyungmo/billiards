{% extends "foundation/base.html" %}
{% block header %}
{% load staticfiles %}
<script type="text/javascript"
	src="http://api.map.baidu.com/api?v=2.0&ak=5aaddbae69513573cd7f693bbdcbe12a"></script>
<script src="{% static "js/moment-with-langs.min.js" %}"></script>	
<script language="javascript">var STATIC_URL = "{{ STATIC_URL|escapejs }}";</script>
<script src="{% static "js/map.js" %}?{{buildid}}"></script>
<script src="{% static "js/map_v2.js" %}?{{buildid}}"></script>
{% endblock %}
{% load extras %}
{% block content %}
	<div class="medium-12 columns">
		<div class="row">
			<h1>约球信息</h1>
		</div>
		<hr>
		<div id="content" class="row">
			<script type="text/javascript">createInfo("正在获取您的位置...");</script>
		</div>
	</div>

{% endblock %}
{% load url from future %} 
{% block script %}
	<script>
	var mypoint = null;
	CHALLENGE_URL = "{% url 'challenge_list' %}";
	CHALLENGE_WITH_DISTANCE_URL = "{% url 'challenge_with_distance' '00.00' '11.11' %}";
	POOLROOM_URL = "{% url 'poolroom_detail' '000' %}";
	CHALLENGE_APPLY_URL = "{% url 'apply_challenge' '000' %}";
	$(document).ready(
			function() {
			    var geolocation = new BMap.Geolocation();
			    geolocation.getCurrentPosition(function(r){
			        if(this.getStatus() == BMAP_STATUS_SUCCESS){
                       	mypoint = r.point;
			            getChallenges(mypoint);
			        }
			        else {
			        	getChallenges(null);
			        }
			    },{enableHighAccuracy: false});
			});
	</script>
{% endblock %}	